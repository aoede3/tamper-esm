{"version":3,"sources":["../../../../vendor/bitsy/index.js","../../../../encoders/js/env/node.ts"],"names":[],"mappings":"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","file":"node.js","sourcesContent":["class Bitsy {\n  constructor(size) {\n    this.length = size;\n    this.bytes = Buffer.alloc(Math.ceil(size / 8));\n  }\n\n  set(index, value) {\n    const byteIndex = (index / 8) | 0;\n    const bitOffset = 7 - (index % 8);\n    const mask = 1 << bitOffset;\n    if (value) {\n      this.bytes[byteIndex] |= mask;\n    } else {\n      this.bytes[byteIndex] &= ~mask;\n    }\n  }\n\n  setSize(size) {\n    if (size <= this.length) return;\n    const next = Buffer.alloc(Math.ceil(size / 8));\n    this.bytes.copy(next);\n    this.bytes = next;\n    this.length = size;\n  }\n\n  slice(begin, end) {\n    const length = Math.max(0, end - begin);\n    const result = new Bitsy(length);\n    for (let i = 0; i < length; i += 1) {\n      const sourceIndex = begin + i;\n      const byteIndex = (sourceIndex / 8) | 0;\n      const bitOffset = 7 - (sourceIndex % 8);\n      const mask = 1 << bitOffset;\n      const value = (this.bytes[byteIndex] & mask) !== 0;\n      if (value) result.set(i, true);\n    }\n    return result;\n  }\n\n  getBuffer() {\n    return this.bytes;\n  }\n}\n\nexport default function createBitsy(size) {\n  return new Bitsy(size);\n}\n","import createBitsy from \"../../../vendor/bitsy/index.js\";\n\ntype BufferLike = Uint8Array;\n\nexport default {\n  createBuffer(length: number): BufferLike {\n    return Buffer.alloc(length);\n  },\n  writeUInt32BE(buffer: BufferLike, value: number, offset: number): void {\n    (buffer as Buffer).writeUInt32BE(value, offset);\n  },\n  writeUInt8(buffer: BufferLike, value: number, offset: number): void {\n    (buffer as Buffer).writeUInt8(value, offset);\n  },\n  concatBuffers(chunks: BufferLike[]): BufferLike {\n    return Buffer.concat(chunks as unknown as Buffer[]);\n  },\n  toBase64(buffer: BufferLike): string {\n    return Buffer.from(buffer).toString(\"base64\");\n  },\n  createBitset(size: number) {\n    return createBitsy(size);\n  },\n};\n"]}